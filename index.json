[{"content":"规则 收益率: 采用上述公式计算(如何计算股票投资收益率) 股票收益率: (卖出价格-买入价格)/买入价格 如果当天只有一只股票, 7.5\u0026ndash;8分仓位分配10%, 大于等于8分的仓位分配90%。 如果当天有多只股票, 按分值大小分配剩余仓位. 分值高优先分配,。 若分值大小在同一区间内, 均分剩余仓位, 若股票不符合买入标准(科创板买入200股起),则放弃买入, 且不会累加到其余股票上 当天卖出股票所获得的资金次日方能买入 周期: 20个交易日 期初金额: 50万 不包括手续费 更新: 每次交易次日更新下表数据 2024交易汇总 收益(元) 收益率 \u0026ndash;83052.08 -17.22% 2024交易明细 类型 股票代码 交易日期 成交价格 交易数量 交易金额 余额 仓位 股票收益率 收益率 买入 833*** 01-10 10.70 42056 -449,999.20 50,000.80 90.00% 卖出 833*** 02-02 9.27 -42056 389,859.12 439,859.92 -13.36% -12.02% 买入 600*** 03-22 36.67 10000 -366,700.00 73,159.92 83.37% 卖出 600*** 04-22 36.78 -10000 367,800.00 440,959.92 0.3% 0.25% 买入 603*** 05-14 28.75 13800 -396,750.00 44,209.92 89.97% 卖出 603*** 06-11 27.01 -13800 372,738.00 416,947.92 0.65% -5.44% 更新内容 2024.01.18 更新833***的交易数量,由原来的42000改为42056 2024.02.07 卖出833***,卖出价格9.27 2024.03.22 买入600***,买入价格36.67，买入数量10000股 2024.04.22 卖出600***,卖出价格36.78 2024.05.14 买入603***,买入价格28.75，买入数量13800股 2024.06.11 卖出603***,卖出价格27.01 全文完\n","permalink":"https://qing.shuncs.com/post/finance/investlive/","summary":"2024股票投资","title":"2024年股票投资(更新中)"},{"content":"目标 价格便宜 充值方便 个人订阅 上别人的车 优点: 省事，充值方便 缺点: 会有跑路的风险，所以尽量选择专门拼车的网站 目前常规订阅Spotify的方法一般来说，就是上别人的车，网上开车的很多，有个人，也有专门的拼车的网站，费用是按年缴纳，一般都是在100元左右一年。\n如果是拼车个人的话，总归是有风险，而且Spotify规定家庭组成员一年之内是不能换的。\n而且如果有多人的想订阅的话，价格就不划算了。\n自己订阅 优点: 安全 缺点: 要有该地区的支付方式。 目前低价区有印度、阿根廷、埃及和土耳其等。但是这些区域最头痛就是支付方式极其不方便。要么是找加密货币充值到当地借记卡，要么是淘宝上购买，价格和风险都远高于上别人的车。\n这种方式除了必不可少的低价区节点，还要每个月去找淘宝上找卖家去充值，价格上也不划算。\n当然Google Play上老用户依然可以订阅。\n如果想在Google Play上订阅，除了低价区节点之外还需要手机安装Google Play的框架，如果是国产的手机话，还要再折腾安装框架。而且现在低价区都已经不允许非当地卡支付。(不过可以通过其它方式绕过订阅)\n如果只有一个人的话，推荐上个稳定的拼车，能省大量的时间和精力。\n家庭订阅 家庭订阅目前有以下几种方式\n通过电话卡充值方式 这种主要是菲律宾区，可以通过充值到Globe电话卡，然后用余额来支付Spotify的订阅费用。但是，目前菲律宾的电话卡要实名，虽说实名不严格，但是毕竟有风险。\n目前菲律宾区家庭组的价格是239菲律宾比索，折合人民币是30元左右。(2024.07.01)\n绑定当地银行卡 目前土区的虚拟卡基本上已经消失殆尽了，但是Wise有马来西亚区的卡，可以将Wise的卡绑定到Spotify来订阅。\n不过此种方式，有个最大问题就是Wise的卡，内地很难开立，除了要护照之外，还要充值20美元激活，还不能使用内地的信用卡。\n这种方式适合已经有马来西亚区的Wise卡的用户。\n马来西亚区的家庭组价格24.9林吉特，折合人民币40元左右。(2024.07.01)\n使用Paypal 其实菲律宾区可以通过Paypal支付，唯一要注意的是要准备一张菲律宾的电话卡和菲律宾的节点，电话卡用来注册Paypal，然后在Paypal里绑定内地信用卡。\n注册完Paypal之后过段时间再来订阅Spotify，这样就可以通过Paypal来支付Spotify了。\n在上面所有方式中，使用Paypal的方式目前是充值最方便的，而且菲律宾家庭组的价格相对便宜。\n全文完\n","permalink":"https://qing.shuncs.com/post/spotify/subspotify/","summary":"如何订阅Spotify","title":"如何订阅Spotify"},{"content":"前言 乘着清明节在家的时候，把家里闲置的台式机卖了，然后顺便将自己的笔记本电脑操作系统重装一下，也捎带整理一下，所以把这次重新安装Windows 11的过程记录下来。\n备份 因为我的Onedrive的容量有1T，所以我将大部分的资料及可携带的软件都放在上面，所以备份资料不多。但以下的资料还是放在本地：\n我的文档(包括微信的聊天记录，虚拟机)\nSSH的KEY，一般是放在%USERPROFILE%/.ssh目录下\nTools目录，这个目录我一般是存放一些可携带的软件，但由于某种原因不方便放在网盘。\n油猴的配置。\n安装Windows 11 首先在微软官网上下载了Windows 11 安装助手，然后准备好一个空闲8G的U盘，一路Next下去。但是在复制文件的过程中却一直报错，换了一个U盘，换成Fat32的文件格式依旧在安装的时候报错。我不太确定是哪方面的问题。\n于是我换了一个Rufus，然后下载了Windows 11 23H2，然后又重新安装到U盘上，这次没有报错。但是在安装过程中，居然找不到无线网。\n根据网上教程，要首先把驱动准备好，然后复制到U盘，按Shift+F10，进入命令行，输入命令 安装完毕重启电脑就有了。\n如果安装 Windows 11 时用联网账户的话，可以使用 no@thankyou.com或1@1.com 登录，密码随意，就能跳过联网账户。\n之后就没有什么问题，一路按上面的提示操作即可。\n软件 我使用的大部分软件安装的时候都没有问题，唯独是VMWare，安装完毕后，VMNet1和8都没有DHCP分配地址。在命令行执行\nservices.msc 看到VMware DHCP Service和VMware NAT Service这两个服务是禁用，手动启用的时候，VMware NAT Service返回1067错误。\n在Windows的事件查看器中，查看了Windows日志，错误是找不到C:\\ProgramData\\VMware\\vmnetdhcp.conf文件。\n我进了C:\\ProgramData\\VMware这个目录，发现的确没有这个文件，我找了一个其它机器，把vmnetdhcp.conf和vmnetnat.conf复制过程，再启动上述两个服务，结果可以正常启动。 但IP地址依旧是169开头的，我手动指定了VMNet8的地址之后，再启动虚拟机，然后在里面指定了IP地址，网关和DNS之后，终于正常了。\n总结 微软现在越来越像国内的软件一样流氓，安装过程如果没有Microsoft的账户就是过不去，安装完毕没多久就弹窗安装微软电脑管家，不知道微软还有没有下限。\n下载地址 Windows 11的相关安装: https://www.microsoft.com/zh-cn/software-download/windows11\nRufus: https://github.com/pbatard/rufus/releases/download/v4.4/rufus-4.4p.exe\n全文完\n","permalink":"https://qing.shuncs.com/post/tech/reinstwin11/","summary":"重新安装Win11","title":"重新安装Windows11的注意事项"},{"content":"摘要 在当今A股市场，投资者在面对市场波动和回报不确定性的情况下，寻求可行的投资策略变得愈发重要。基金定投作为一种长期投资方法，通过将投资分散在时间上，期望在市场波动中获得长期稳定的收益。\n通过对2800多只基金的数据分析，深入探讨了不同市场环境下基金定投的收益表现，并比较了各种基金类型的定投绩效，以揭示基金定投是否能够为投资者带来丰厚回报的可能性。\n定投是否能够赚钱 假定定投6年以上，定投的截止时间定为2019年到2023年，同时，以0作为盈亏分界线(大于0认为是盈利，小于等于0认为亏损)，即使在最差的年份，也有接近82%的基金定投是盈利的。也就是说，只要持续定期投资的话，大部分情况下都能获利。\n定投原理 定投的原理很简单，通过长时间的分散购买来摊薄买入成本，并在适当时机卖出，期望实现长期稳定的收益。\n定投的成功与否取决于两个关键要素，即定投标的与卖出时机。\n定投分析 定投规则 定投开始时间设定为基金成立后的一个月，且投资周期必须满6年(例如定投结束时间是2023年12月31日，则成立时间必须在2018年1月1日之前) 分红采用现金分红，拆分正常计算在内。 按月定投。 定投日期在1号到29号之间计算并从中取最大收益率。 如果定投当天是节假日则顺延下一交易日。 卖出时间固定为定投结束时间(如果当天是节假日，则提前至上一个交易日)的收盘净值。 卖出时机 之前将0作为划分收益正负的标准，但实际上这是不科学的，毕竟资金放了至少6年，理应要跑赢存款利率，或者再要求再高一些，要跑赢同期的贷款利率和通货膨胀。\n根据上述规则对目前市场的基金作了分析，若将6%年化收益率视为定投是否合格的标准。\n2020和2021年都有超过90%的基金达到这个标准，而在2023年，只有1300多只基金达到这个要求，占到整个基金的40%不到。 换句话说，在2015年或之前的时间完全可以在市场上随便挑只基金并定投到2020或2021年底。可是如果定投到2023年年底的话，那就要更加谨慎的选择合适的基金。\n当然，这是事后分析，在2015年定投的时候或者是2021年年底的时候，根本没办法知道这个结果。所以在当初决定定投的时候，一定要设置好卖出点。\n定投标的 若将基金类型作为划分标准，有以几下几种: 指数型、混合型、股票型、QDII及FOF。\n指数型 指数型-其他类的基金定投收益率全部超过6%。这部分基金事实上在过去3年里面最低的一只其定投收益率都超过了5%，当然这部分基金之所以有这么稳定的较高收益率，完全是原因投资方向全部是放在黄金ETF上。\n指数型-海外股票的基金由于里面不少投资中概股和恒生指数，所以拉低了整体的平均收益。如果将这些中概股和恒生指数去掉的话，收益还是很可观的。 指数型-股票从结果来看是相当差的，2023年只有15%的基金其收益超过6%，而平均收益更只有1.83%。但其实这个类型里面有相当多的基金投资方向是在某个特定行业，比如地产，军工和医药等，行业的属性必然会基金的收益造成巨大的波动，如果定投的话，并不推荐投资此类型的基金。\n但消费行业是例外，这个行业受宏观面影响较小，服务于人类的基本需求，有持久的基础，相对于其它行业有天然抗跌性。\n混合型 混合型和股票型这两个类型与A股趋同性较高，当行情好的时候，往往能带来高收益，当行情变差的时候，收益也会同步降低。\n混合型的降幅相对而言会比较慢，当然这是由于投资属性所决定的。\n这两种类型的基金数量较多，截止到2023年年底的时候有将超过2200多只，但收益最高的基金也在这两个类型之中，如果想在这两种类型里面挑选优秀基金的话，必须好好下一番功夫。\n如何进行定投 从现在看未来，AI发展肯定会突飞猛进，所以可以考虑美股科技类的方向。\n而黄金目前趋势向上，叠加上疫情后国内外情势，这也可以做为定投的配置选项之一。\n同时指数类基金以及投资在消费类的指数都可以作为定投的方向。\n定投前规划好投资总额（或定投金额）、投资年限和期望收益。定投周期可以根据投资金额来选择，如果投资总额较大，可以按照每周定投，如果定投金额较小，可以每月定投。期望收益可以根据定投的目的决定，也可以根据自己的想法来决定，无论如何，如果达到了期望收益，就一定要卖出。\nQ\u0026amp;A 问： 为什么选择6%这个收益率作为盈亏分界线? 答： 在2019年8月20日之前5年期长期贷款的利率是4.95%，再加个1%的通胀，定投理应要跑赢这个指标。 问： 收益率是如何计算的？ 答： 收益率采用一组现金流的内部收益率(XIRR)，简单的说就是包含时间的年化收益率。 问： 基金类型是如何划分？ 答： 所有数据采集于天天基金网，包括基金类型的划分 问： 定投日期的不同是否会影响收益率？ 答： 有影响但不是太大，也就是说在一个月任一日期定投都可以。 参考文章 各基金类型定义 混合型: https://help.1234567.com.cn/question_225.html 指数型: https://help.1234567.com.cn/question_221.html 股票型: https://help.1234567.com.cn/question_222.html 全文完\n","permalink":"https://qing.shuncs.com/post/finance/fundismoney/","summary":"基金定投收益论分析","title":"基金定投收益分析及策略探讨"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.121.2\nGit版本: 2.38.1\nTheme: PaperMod\n前提 首先在google analytics 注册账号并添加自己的域名\n设置GoogleAnalytics参数 在config.yaml中配置如下参数，其中G-MEASUREMENT_ID在数据流详情页\nservices: googleAnalytics: ID: G-MEASUREMENT_ID 新建Google Analytics模板 在layouts\\_internal\\目录下新建google_analytics.html(目录若不存在,自行创建)\n\u0026lt;!-- Google tag (gtag.js) --\u0026gt; \u0026lt;script async src=\u0026#34;https://www.googletagmanager.com/gtag/js?id=自己的G-MEASUREMENT_ID\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag(\u0026#39;js\u0026#39;, new Date()); gtag(\u0026#39;config\u0026#39;, \u0026#39;自己的G-MEASUREMENT_ID\u0026#39;); \u0026lt;/script\u0026gt; 引用Google Analytics模板 在themes\\PaperMod\\layouts\\partials目录下，打开head.html，添加如下内容:\n\u0026lt;head\u0026gt; {{- if not .Site.IsServer }} {{ template \u0026#34;_internal/google_analytics.html\u0026#34; . }} {{- end }} \u0026lt;/head\u0026gt; 参考文章 https://gohugo.io/templates/internal/ https://loyayz.com/website/220530-hugo-papermodx-add-google-analytics/ 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/hugogoogle/","summary":"在Hugo中使用Google分析","title":"在Hugo中使用Google Analytics"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.121.2\nGit版本: 2.38.1\nTheme: PaperMod\n配置 在config.yml文件中添加如下内容(yaml格式)\nfrontmatter: lastmod: - lastmod - :fileModTime - :default ShowLastMod: true 在themes\\PaperMod\\layouts\\partials\\post_meta.html文件中添加如下内容\n\u0026lt;!-- 更新时间 --\u0026gt; {{- if (.Param \u0026#34;ShowLastMod\u0026#34;) -}} {{- $scratch.Add \u0026#34;meta\u0026#34; (slice (printf \u0026#34;Update:\u0026amp;nbsp;%s\u0026#34; (.Lastmod.Format (.Site.Params.dateFormat | default \u0026#34;2006-01-02\u0026#34;)))) }} {{- end }} 参考文章 https://www.sulvblog.cn/posts/blog/hugo_postmeta/ https://gohugo.io/getting-started/configuration/#configure-dates 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/hugoupdate/","summary":"在Hugo内添加更新时间","title":"在Hugo里面添加更新时间"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.121.2\nGit版本: 2.38.1\nTheme: PaperMod\n前要 在发布2023年股票投资总结(2023年股票投资总结)的时候，发现所有文章的日期全部变成以下样式\n\u0026lt;span title=\u0026#39;2024-01-16 16:48:51 +0800 CST\u0026#39;\u0026gt;2024-01-16\u0026lt;/span\u0026gt;\u0026amp;nbsp;·\u0026amp;nbsp;1 分钟\u0026amp;nbsp;·\u0026amp;nbsp;78 字 在网上找了一下发现原来是hugo升级delimit函数的时候影响了PaperMod主题。\n修改 编辑theme/PaperMod/layouts/partials/post_meta.html这个文件，注释有问题的并新增如下一行\n\u0026lt;!-- {{- delimit . \u0026#34;\u0026amp;nbsp;·\u0026amp;nbsp;\u0026#34; -}} --\u0026gt; {{- delimit . \u0026#34;\u0026amp;nbsp;·\u0026amp;nbsp;\u0026#34; | safeHTML -}} 然后重新发布即可\n参考文章 https://github.com/adityatelange/hugo-PaperMod/blob/master/layouts/partials/post_meta.html#L22 https://github.com/gohugoio/hugo/releases/tag/v0.120.0 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/htmlrender/","summary":"Hugo文章日期渲染","title":"Hugo文章日期渲染问题"},{"content":"背景 去年10月份，针对资金分配进行检验(如何在股票交易中合理分配资金使得收益最大化)，发现模型3中仓位分配还可以再优化。\n收益率: 采用上述公式(如何计算股票投资收益率) 配比: 依照分值对资金进行分配的比例(配比3:8表示≥Y分且\u0026lt;X分，仓位占30%，分值≥X分，仓位占80%) 模型3: 对模型内所有股票按照平均收益等多个规则打分。 周期: 20个交易日 期初金额: 50万 分析 经过分析模型3后发现7.5-8分之间仓位配比10%，超过8分仓位配比90%，在2022和2023收益均是最高。\n所以评分标准由原来的7分提高到7.5分，配比标准改为1:9(分值在7.5分到8分，仓位占10%,大于等于8分的，仓位占90%)。\n模型3的投资汇总及明细 以下数据均是使用修正后的模型所得出来 明细数据均是在交易日期T-1日筛选出来, 且在T日是完全能够按照图中的价格买入或卖出,所有数据并非事后追溯 汇总 年份 利润 收益率 2022 91820.00 20.40% 2023 45719.30 1.14% 2022年投资明细(初始资金50万) 2023年投资明细(初始资金50万) 全文完\n","permalink":"https://qing.shuncs.com/post/finance/invest2023/","summary":"2023股票投资","title":"2023年股票投资总结"},{"content":"股票收益率 股票收益率是怎么计算出来？\n在前面的示例中，使用的是: 利润/买入价格\n利润 利润： 就是全部交易金额的汇总，包括分红，送股和配股等。如果有多次交易，则合并计算。例如:\n利润就是：卖出+分红-买入金额，也就是图上所显示的5470元。\n成本 买入可能会发生多次且分红送股等，那么这个买入价格怎么来确定？\n就是成本，成本就是为某只股票花费的总金额减去分红\n还是用上图来说明：上图分3次买入，总共花费了156400元，分红5000元，那成本就是151400元。\n所以上图中的股票收益率： 5470/151400=3.61%\n送股之所以没有在成本中计算，是因为已经算在利润里面了。 配股可以算成买入，就是买入价格不同而已 我们重新给出股票收益率的定义： $$Sy = \\frac{Pr}{\\sum_{k=1}^{N} Co{\\tiny k} -Di{\\tiny k}}\\times 100$$\nPr: 代表该股票的利润 Co: 代表该股票的成本 Di: 代表股票分红 k: 交易次数 仓位 仓位=(买入的市值/资金的余额)*100\n买入市值 买入的市值指的是第一次买入的市值吗？ 如果有多次买入相同的股票，这个市值如何计算呢？\n答案就是汇总计算\n如上图所示的仓位\n10%+11.11%=21.11%\n中间虽然有资金流动，但未发生交易，所以对仓位不产生任何影响。\n所以上述股票的收益率：21.11%*20%=4.22%\n再看一下，如果资金流动发生在交易之前，会有什么影响？\n收益率:(25%+33.33%)*20% = 11.67%\n可以看出尽管买入和卖出完全一样，但仓位因为资金的流动而发生改变，所以收益率随之发生变化。\n仓位对收益率产生影响，那问题是这合理吗？\n示例1 以下两张图，期初金额都是50万，相同的时间买入相同的股票，但仓位分配不同\n下图的股票仓位分配是均分(每支50%)，但利润是负数。 再来下面这张图，仓位使用特定分配模式，但结果就和上图完全不同 所以仓位的分配对收益率也是非常重要。\n资金余额 资金余额可以理解交易之前的资金账户金额。\n那如果当日交易之发生了资金流动呢？比如下午买入股票，上午存入资金这种情况？\n看资金变动和交易谁先发生。如果交易先发生，余额应该沿用上一日的，如果资金变动先发生的话，余额就用新的。\n我们重新给出仓位的公式:\n$$ Po = \\sum_{k=1}^{N} \\frac{Mc{\\tiny k}}{Ba{\\tiny k}} \\times 100$$\nPo: 代表仓位 Mc: 代表股票市值 Ba: T-1日余额 总结 每个指标都有优缺点，这个也不例外。\n计算较为复杂，没有考虑时间因素，融券这块没有涉及。\n但是是否合理依旧取决于你对收益率是如何定义的。\n全文完\n","permalink":"https://qing.shuncs.com/post/finance/yield2/","summary":"如何计算股票投资收益率","title":"如何计算股票投资收益率(下)"},{"content":"摘要 在日常投资过程中，计算收益率是必不可少的。但如何合理地计算收益率却是一个关键问题。本文讨论了不同方法计算收益率的优缺点，并提出了一种结合仓位和股票收益率的方法来更全面地评估投资绩效。\n收益率是什么 计算方法 在日常投资中，通常使用以下方法来计算收益率：\n简单公式法 收益率 = (利润 / 期初本金) * 100\n券商计算法 券商将流入或流出的资金按特定方法加权到期初本金，然后使用简单公式法计算收益率\n净值法 使用基金净值的方法来计算收益率\n带时间的内部报酬率 考虑了时间价值的内部报酬率计算方法\n结论 上述计算收益率里面，大量资金流动都会或多或少影响收益率。无论采用哪种计算收益率的方法，首先我们要明确一点的是为什么要计算收益率？在我看来，收益率是评价一个人选股和操盘水平高低的量化指标。\n问题与挑战 那么如何合理的计算收益率呢？我们先假设有如下两种场景\n请问A和B的哪个水平高？如果按照简单公式的计算公式\u0026mdash;收益率=(利润/期初本金)*100来计算的话，A和B是一样的，都是5%。\n可是再仔细观察一下，发现虽然赚取的利润是相同的，但买入股票的金额是不同的，A只用了10万就赚了5万，B却用了50万才赚了5万。\n根据上面的情况可以得出\nA的账户：5万/10万=50%，收益率应该是50% B的账户：5万/50万=10%，收益率应该是10% 那似乎是A的水平比B高，如果按这个来看的话，收益率完全蜕变了股票收益率，股票收益率就是代表收益率，那这样的情况是否合理呢？\n我们再假设如下的场景\n如果使用上述方法的话，\n第一次收益率: 10万/50万=20%； 第二次收益率：-5万/10万=-50%。 那如果简单累计的话，两次之和就是20%-50%=-30%。\n虽然C的账户有过幅度不少的亏损，但账户总体是盈利的，可是如果使用股票收益率来计算的，最终反而是负的，明显不合理。\n所以股票收益率并不能代表账户的实际收益率。\n结论 我们回过头再看上面的所说，收益率是评价一个人选股和操盘水平高低的量化指标。\n那既然是选股和操盘水平，股票收益率当然要作为一个参考因素，但只是其中一个因素，而不是全部的。\n在所有收益率的计算公式中，利润这个分子一直是没有变化，也就是说，在讨论收益率的时候，如何选择分母至关重要。 在最开始的时候，分母选择的是期初本金，可是期初本金只是某一个时点的金额。\n如果期初本金10万，之后存入了1000万并且赚取了50万，总不能说收益率是500%，这样的收益率就会严重失真，这也就是券商为什么要对本金做加权处理的原因。\n也就是说资金也非常重要，不论是期初本金还是买入成本，都和资金有密切关系，所以为了要体现合理的收益率，资金必须要在公式中体现。那么如何体现且收益率不能失真？\n就是股票仓位。\n那将仓位和股票收益率结合在一起，可以得出下面公式\n$$y = \\sum_{k=1}^{N} Po \\times Sy{\\tiny k} $$\nPo：代表股票仓位 Sy：代表股票收益率 k：代表单个股票 y: 收益率 这样既考虑了资金的仓位，同时也将股票收益率纳入进来，符合收益率的定义。我们重新按照上述公式来计算示例里面的收益率，看看是否符合我们的直觉：\nA的账户：仓位=10万/100万=10%，收益率=10%*50%=5% B的账户：仓位=50万/100万=50%，收益率=50%*10%=5% C的账户：第一次:仓位=50万/100万=50%，第二次:10万/110万=9.09%。第一次:收益率=50%*20%=10%，第二次:收益率=9.09%*-50%=-4.55%，两次累计5.45% 上面的结果有点出乎意料，A和B的收益率是一样的，而C的收益率反而要比A和B要高一点。\n首先分析A和B结果是否合理，两者的股票收益率A\u0026gt;B, 但仓位分配上B账户使用了50%的仓位去操作，也就是收益率定义中的操盘水平，虽然选股水平不如A，但操盘水平比A强，所以最终的收益率一样也是情理之中。\n再来看看C的交易纪录，第一次的操盘水平和B一样，同时收益率也比A和B高，所以第一次的收益率是超过这两个账户，我认为是合理的。\n第二次交易的时候，虽然选股很差，但并没有投入很重的仓位。并且第一次收益率是远远超过A和B，但第二次的收益率虽然是负数，仍然能够被第一次cover住，所以在最终的结果上是比A和B要高。\n参考文章 https://www.futuhk.com/cn/support/topic2_454 ","permalink":"https://qing.shuncs.com/post/finance/yield/","summary":"如何计算股票投资收益率","title":"如何计算股票投资收益率(上)"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.108\nGit版本: 2.38.1\nTheme: PaperMod\n下载 在KaTex官网中下载https://github.com/KaTeX/KaTeX/releases/download/v0.16.9/katex.zip\n并解压到根目录下的/static/目录下\n配置 在PaperMod\\layouts\\partials\\katex.html文件中，添加如下内容(没有katex.html则新建) \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;/katex/katex.min.css\u0026#34;\u0026gt; \u0026lt;script defer src=\u0026#34;/katex/katex.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script defer src=\u0026#34;/katex/contrib/auto-render.js\u0026#34; onload=\u0026#34;renderMathInElement(document.body);\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; 在PaperMod\\layouts\\partials\\head.html中添加如下内容 {{ if .Params.katex}}{{ partial \u0026#34;katex.html\u0026#34; . }}{{ end }} 在使用Katex语法的文档中，配置katex参数(toml格式)即可 katex: true 示例\n$$2^{n-1}-1$$ $$2^{n-1}-1$$\n参考文章 https://midor.cc/posts/quickstart/using-katex-in-hugo/ 在线生成公式 https://www.latexlive.com/ 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/hugolatex/","summary":"在Hugo使用KaTeX渲染数学公式","title":"使用KaTeX渲染数学公式"},{"content":"习惯走路。在没有课的下午，如果阳光不错，经常会步行地横穿大半个城市。从校门出去，经过石鼓路到达王府大街，右行到朝天宫附近，一路上看到本色的南京，很多七层以下的临街居民楼阳台上挂着晒洗的衣服，颜色发白的棉毛衫裤和被套在风中摇摆，南京的市井就一点一点凸现出来。\n一直难以确定地给南京定位。早些时候觉得就是桨声灯影里的秦淮河，本地电台有一则黄金档的广告，介绍游客入住夫子庙的状元楼酒店，可以在咫尺的地方看夜秦淮。状元楼是南京最早的五星级酒店之一，奢华的场所，用来和纸醉金迷的秦淮河并提，有相得益彰的效果。\n夫子庙进大门后不远，西南角，乌衣巷附近，就是李香君的故居。李属于六朝粉黛的岁月，脂粉文化的代表，风情万种却难逃红颜薄命的女子。 宁派作家苏童的小说经常可以看到相似的影子。可惜风流总被雨打风吹去，如今的十里秦淮，除了夫子庙那一段还依稀有繁华的印记，别的河段就只是缺乏治理的污染河流了。\n我个人喜欢夫子庙那段的两座桥，晚上灯笼亮起来的时候，在桥上看临河的晚晴楼和秦淮人家青瓦白墙的建筑，能感受到一些古韵遗风。\n现在的南京，更多的是一些质朴的平民气息，也可以称为市井气。这些市井气是我喜欢的，亲切温暖的气息。沿着藏在主要街道内的巷子走，有卖烤山芋的摊子，在门口晒太阳的老太太，平常人家的平凡生活。听很多人说，也就是这些宁静平常的巷子，很多挺有分量的人隐藏着，所谓的\u0026quot;大隐隐于市\u0026quot;。\n秋天的时候，一两个人沿着北京西路和颐和路走，窄窄的街道两旁梧桐树遮天蔽日，很少有人，偶尔的汽车和自行车经过，动静很小。在小路上看年代久远的刷成青色的墙，里面是居家的普通人家，房屋很矮，偶尔透出远处高耸的大厦。经过那一段的时候，总是忍不住要拿它上海的衡山路相比，前者在宁静中张扬着，后者在宁静中沉默着，暗合南京整个的基调。\n出去的时候可以看到很多的人。在南京到上海这个区域中，大家对南京人有一个俗成的称谓，叫做\u0026quot;南京大萝卜\u0026quot;。这样叫没有什么轻蔑的意味，只是对南京人品质的一种概括和提炼。南京人相对而言比较实在，不喜欢玩很多的花哨。在这里，小资的味道非常薄弱。街上的女孩子大多素面朝天的来脸，穿很普通的衣服。\n有一个同学在南艺读书，那个学校据说是全国四大美女集散地之一，有的时候过去她那儿，经常可以看到漂亮得一塌糊涂的女孩儿在街边小饭店吃东西，要的是几块钱一份的炒土豆丝，鱼香茄子之类，朴素克制的女孩子。\n晚上听电台，蓝色音乐田的DJ刘伟说了一句很好的话，他说：“内敛和含蓄的事物总会更经得起时间的考验，因为它从不强加与你任何的理念，只是在沉默中等待着触动和共鸣。”这句话用在南京身上，刚刚好。\n全文完\n","permalink":"https://qing.shuncs.com/post/nj/njessay/","summary":"南京的市井气息和内敛品质","title":"南京的市井"},{"content":"版本 版本在iOS12以上,由于版本不同,部分内容显示和截图不同, 截图的版本是:iOS17\n目标 根据明天是否是节假日或年假, 自动打开或关闭闹钟\n前期准备(必做) 新建一个闹钟, 标签为起床, 自定义时间, 其余不需要变 订阅\u0026quot;中国大陆节假日日历\u0026quot;\n点击上图中最下方的日历 选择\u0026quot;中国大陆节假日日历\u0026quot; 快捷指令配置 可以在iPhone上使用safari直接访问如下网址下载两个快捷指令\n下载 节假日闹钟\nhttps://www.icloud.com/shortcuts/31fd381e33cf407f862324652db3705f\n明天休息还是上班\nhttps://www.icloud.com/shortcuts/33908eb14dea409ca04a80e78a8e4ad9\n配置自动化(必做) 打开快捷指令App,选择最下方自动化，点击创建个人自动化，如果已经有自动化的, 点击右上角的[+]按钮 选择特定时间,由于快捷指令判断是明天, 所以选择时间建议放在晚上21:00\u0026ndash;23:00之间 输入时间, 选择立即运行, 运行时通知和确认后运行需要关闭 点击我的快捷指令, 选择节假日闹钟\nQ\u0026amp;A Q: 日历中没有Family\nA: 手工将快捷指令中的Family替换成自己的日历\nQ: 如果明天是年假, 如何关闭闹钟\nA: 在日历中添加全天事件, 标题命名为: 年假\n全文完\n","permalink":"https://qing.shuncs.com/post/apple/holiday/","summary":"使用快捷方式自动打开节假日闹钟","title":"使用快捷方式自动打开节假日闹钟"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.121.2\nGit版本: 2.38.1\nTheme: PaperMod\n在HTML文件添加引用 在PaperMod\\layouts\\partials\\head.html文件中，添加如下内容\n\u0026lt;link rel=\u0026#39;stylesheet\u0026#39; href=\u0026#39;https://ik.imagekit.io/chinesefonts/packages/lxgwwenkai/dist/LXGWWenKai-Regular/result.css\u0026#39; /\u0026gt; 在CSS文件指定使用区域 在PaperMod\\assets\\css\\extended\\blank.css文件中，修改字体使用区域中添加如下内容\n.post-content{ font-family: LXGW WenKai,serif; } Q\u0026amp;A Q: 按上述配置之后字体不生效\nA: 上述地址中的CDN是超限了, 可以在imagekit.io自行注册一个账号,然后将字体分包并上传, 使用独立的CDN即可\n具体可参考: https://chinese-font.netlify.app/post/deploy_to_cdn/\nQ: 使用独立的CDN依然不生效\nA: 请检查font-family中的字体名是否正确\n参考文章 https://chinese-font.netlify.app/ 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/hugofont/","summary":"在Hugo中添加中文web字体","title":"在hugo里面添加中文web字体"},{"content":"前提 目前选股全部基于自己研究的模型, 这种模型经过2-3年的运行之后, 发现了很多问题, 由于之前大部分问题是模型本身问题, 所以一直在对模型进行分析修补.\n从2022年开始, 模型运行进入一个新的阶段, 在运行了半年之后, 发生另一个问题就是资金分配的问题. 经常会出现仓位已经见底了, 但模型仍然会筛选出新的股票, 更关键的是新股票有时候是盈利的, 反而持仓的股票是亏损的.\n痛定思痛之后, 决定对资金如何分配进行一些不成熟思考, 并对2022年全部及2023年1-4月份在股票池中的股票进行分析研究, 试图找出一个合理的资金分配方式.\n目的 能够将资金分配合理化, 并尽可能保证每月有1-2只买入并获得期望收益, 同时资金分配方案能够符合实战要求\n回测方案 回测资金50万. (资金多少与收益无关联性)\n范围包括了2022年的全部及2023年部分时间.\n按方案中的规则进行分配 所有收益率均是内部报酬率\n方案1 重仓持股某一只股票\n规则 按时间顺序将全部资金买入某一只股票 如果剩余金额符合条件买入第二只股票, 则将剩余资金全部买入. 如果当天有多只股票, 则每只股票平均分配剩余资金, 但其中一只股票不符合买入标准(科创板买入200股起),则该股票的所分配资金会被遗弃,不会累加到其余股票上 当天卖出股票所获得的资金次日方能买入 忽略手续费 回测结果 时间 数量(支) 利润(元) 收益率 2022 30 -343350.10 -75.89% 2023 13 27039.50 7.91% 结论 2022年的收益率简直是惨不忍睹, 原因之一, 这是股票池中的全部股票, 从实战中不可能全部买入, 其二去年的行情与模型的分析背离, 所以收益率会如此之低. 不过这也从另一个方面验证鸡蛋绝不能放在同一个篮子里面.\n方案2 每只股票分配相同金额\n规则 按时间顺序用固定金额买入某一只股票 如果当天只有一只股票且剩余金额小于固定金额, 则按剩余金额买入. 如果当天有多只股票, 则每只股票均分剩余金额, 无论均分金额是否小于固定金额, 但其中一只股票不符合买入标准(科创板买入200股起),则该股票的所分配资金会被丢弃,不会累加到其余股票上 当天卖出股票所获得的资金次日方能买入 忽略手续费 回测结果 时间 分配金额(万元) 数量(支) 利润(元) 收益率 2022 10 115 -228355.12 -70.37% 2022 20 63 -319658.81 -72.12% 2022 30 43 -331300.58 -73.82% 2023 10 22 29144.33 16.67% 2023 20 20 32477.51 10.42% 2023 30 15 47834.00 14.58% 结论 从结果来看, 收益率完全依赖于模型的质量. 不过收益摆动过于巨大, 如果在熊市中会遭受巨大的损失, 同时买入数量过多, 当投入金额10万的时候, 每月买入数量接近10支.\n方案3 分别每只模型打分, 根据不同的分值按比例分配仓位\n分值按自定义规则进行评价, 分值与仓位分配纯属主观, 并且评分标准未发生改变, 所以分析具有可行性\n规则 如果当天只有一只股票, 分值≥7分且\u0026lt;8分, 分配仓位的30%,;如果分值≥8, 分配仓位的80% 如果当天有多只股票, 按分值大小分配剩余仓位. 分值高优先分配, 若分值大小在同一区间内, 均分剩余仓位, 若股票不符合买入标准(科创板买入200股起),则放弃买入, 且不会累加到其余股票上 当天卖出股票所获得的资金次日方能买入 忽略手续费 回测结果 时间 数量(支) 利润(元) 收益率 2022 19 5070.00 4.55% 2023 8 4006.14 2.92% 结论 收益率显著提升, 特别是去年是正收益, 今年收益不高的原因估计有二个, 第一是大于8分的股票迄今为止没出现, 去年出现4支, 一支负收益(大盘股,实战中不会买), 其余3支都是正收益. 第二时间才4个月, 后续情况不明朗.\n方案4 根据止损率不同分配不同金额\n规则 止损率在0-10%之间, 分配50%的资金, 止损率在10.01%-20%之间,分配30%的资金, 止损率在20%以上, 分配20%的资金. 如果当天只有一只股票, 按上述规则分配资金 如果当天有多只股票, 先分配止损率最低的, 在全仓剩余金额和全仓50%的资金, 取最小, 再继续分配止损率次高的, 资金分配和上述相同, 再分配止损率最高. 当天卖出股票所获得的资金次日方能买入 忽略手续费 回测结果 时间 数量(支) 利润(元) 收益率 2022 163 -187110.74 -55.74% 2023 23 27624.66 12.07% 结论 和方案2相比, 亏损有小幅减少但仍有5成.\n总结 这4个方案中, 没有一个是完美方案, 或多或少存在一些不足, 从我个人角度来看, 我的目标是尽可能是正收益, 相对比较保守. 所以我将会选择方案3.\n其实方案还可以做成复合式, 比如在7-8分之内, 根据止损率不同分配资金, 超过8分则继续方案3的规则. 还有凯利公式, 但因为没有历史的数据, 所以没办法计算具体的仓位策略.\n最后由于这次分析的都是同一周期的, 还有更复杂的多周期数据(包括30-200个交易日), 由于今年才开始将更长周期的数据纳入股票池, 所以具体的效果还有待观察.\n全文完\n","permalink":"https://qing.shuncs.com/post/finance/capital/","summary":"如何为每支股票分配合适资金","title":"如何在股票交易中合理分配资金使得收益最大化"},{"content":"安装环境 软路由机器架构: x86_64\nOpenWrt版本: 22.03\n扩容设备: /dev/sda2（如果不同，后面涉及全部需要修改）\n目标 按下文配置后，openWrt可以使用全部磁盘空间\n建议在安装完openWrt系统后执行，避免某些进程在执行过程中而导致无法扩容\n安装相关软件 opkg update opkg install cfdisk tune2fs resize2fs 执行cfdisk，选择待扩容的设备，在下面选择Resize\n输入新的size，然后Write，输入yes，选择Quit\n执行以下命令，所有输入均选择y ，然后重启\nmount -o remount,ro / e2fsck -f /dev/sda2 reboot 重启完执行以下命令，并重启 mount -o remount,ro / tune2fs -O^resize_inode /dev/sda2 e2fsck -f /dev/sda2 reboot 重启完输入以下命令，并重启 mount -o remount,ro / tune2fs -O^resize_inode /dev/sda2 fsck.ext4 /dev/sda2 reboot 重启完输入以下命令，执行命令检查是否已扩容 resize2fs /dev/sda2 df -h 全文完\n","permalink":"https://qing.shuncs.com/post/tech/openwrtdisk/","summary":"扩容openWrt磁盘容量","title":"在openWrt上扩容磁盘容量"},{"content":"安装环境 软路由机器架构: x86_64\nOpenWrt版本: 22.03\nOpenWrt的IP: 192.168.88.3 (如果不同,后面涉及此地址全部需要修改)\n主路由器的地址: 192.168.88.1(如果不同,后面涉及此地址全部需要修改)\n目标 按下文配置好网关后，指定的设备走软路由，其余设备主软路由\n0. 关闭主路由的DHCP 请参考主路由器的说明，关闭主路由的DHCP\n1. 配置DHCP 使用putty登录openWrt，然后按顺序执行以下命令（大小写勿输错）\n首先在DHCP文件中添加一个tag，\nuci set dhcp.iot=\u0026#39;tag\u0026#39; uci add_list dhcp.iot.dhcp_option=\u0026#39;6,8.8.4.4,114.114.114.114\u0026#39; uci add_list dhcp.iot.dhcp_option=\u0026#39;3,192.168.88.1\u0026#39; uci set dhcp.iot.force=\u0026#39;1\u0026#39; uci commit dhcp 单独为每一个主机配置一个，其中设备名称自定义，MAC地址不区分大小写\nuci add dhcp host uci commit dhcp uci set dhcp.@host[0].dns=\u0026#39;1\u0026#39; uci set dhcp.@host[0].ip=\u0026#39;IP地址1\u0026#39; uci set dhcp.@host[0].leasetime=\u0026#39;infinite\u0026#39; uci set dhcp.@host[0].name=\u0026#39;设备名称1\u0026#39; uci set dhcp.@host[0].mac=\u0026#39;MAC地址1\u0026#39; uci set dhcp.@host[0].tag=\u0026#39;iot\u0026#39; uci commit dhcp uci add dhcp host uci commit dhcp uci set dhcp.@host[1].dns=\u0026#39;1\u0026#39; uci set dhcp.@host[1].ip=\u0026#39;IP地址2\u0026#39; uci set dhcp.@host[1].leasetime=\u0026#39;infinite\u0026#39; uci set dhcp.@host[1].name=\u0026#39;设备名称2\u0026#39; uci set dhcp.@host[1].mac=\u0026#39;MAC地址2\u0026#39; uci set dhcp.@host[1].tag=\u0026#39;iot\u0026#39; uci commit dhcp uci add dhcp host uci commit dhcp uci set dhcp.@host[2].dns=\u0026#39;1\u0026#39; uci set dhcp.@host[2].ip=\u0026#39;IP地址3\u0026#39; uci set dhcp.@host[2].leasetime=\u0026#39;infinite\u0026#39; uci set dhcp.@host[2].name=\u0026#39;设备名称3\u0026#39; uci set dhcp.@host[2].mac=\u0026#39;MAC地址3\u0026#39; uci set dhcp.@host[2].tag=\u0026#39;iot\u0026#39; uci commit dhcp 指定设备配置结束后，重启dhcp，然后设备重新连接无线即可。\nservice dhcp restart 3. 说明 如何查看设备的MAC地址 iPhone\n设置-\u0026gt;无线局域网-\u0026gt;无线局域网地址 Windows操作系统\n开始-\u0026gt;运行-\u0026gt;输入cmd，执行ipconfig /all 命令，物理地址就是MAC地址 全文完\n","permalink":"https://qing.shuncs.com/post/tech/gatewayconf/","summary":"指定设备走软路由，其余走主路由","title":"在openWrt上安装并配置Clash (网关篇)"},{"content":"安装环境 软路由机器架构: x86_64\nOpenWrt版本: 22.03\nOpenWrt的IP: 192.168.88.3 (如果不同,后面涉及此地址全部需要修改)\n目标 在电脑或手机上手动配置网关，可以直接代理上网\n执行前Clash必须已启动且能正常上网\n0. 自动安装 如果openWrt未安装tproxy模块则执行下面脚本 wget https://www.shuncs.com/download/instnft_redir.sh \u0026amp;\u0026amp; chmod +x instnft_redir.sh \u0026amp;\u0026amp; ./instnft_redir.sh 如果openWrt已安装tproxy模块执行下面脚本 wget https://www.shuncs.com/download/instnft_tproxy.sh \u0026amp;\u0026amp; chmod +x instnft_tproxy.sh \u0026amp;\u0026amp; ./instnft_tproxy.sh 1. 新增私有地址列表 vi /etc/nftables.d/private.nft 将下列内容复制到此文件，然后按:wq退出\ndefine private_list = { 0.0.0.0/8, 10.0.0.0/8, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/4, 240.0.0.0/4 } 2. 新增nftable配置 新增配置文件 vi /etc/nftables.conf 将下面内容复制到此文件，并按:wq保存退出 #!/usr/sbin/nft -f flush ruleset define tproxyPort=7893 define redirPort=7892 include \u0026#34;/etc/nftables.d/private.nft\u0026#34; table inet clash { chain prerouting { type nat hook prerouting priority 0; policy accept; ip daddr $private_list return # 如果未安装tproxy,则将下一行注释掉 meta l4proto {tcp, udp } tproxy to :$tproxyPort # 如果已安装tproxy,则将下一行注释掉 ip protocol tcp redirect to :$redirPort } } 3. 生效Nftable配置 nft flush ruleset nft -f /etc/nftables.conf 4. 设置在openWrt每次开机自动启动Nftable 新增配置文件 vi /etc/init.d/nft 将下述内容复制到文件中,将按:wq保存退出 #!/bin/sh /etc/rc.common START=90 STOP=15 USE_PROCD=1 #PROCD_DEBUG=1 CONF=/etc/ CONFFILE=nftables.conf PROG=/usr/sbin/nft start_service() { procd_open_instance procd_set_param command $PROG -f $CONF$CONFFILE procd_set_param stdout 1 procd_set_param stderr 1 procd_set_param respawn ${respawn_threshold:-3600} ${respawn_timeout:-5} ${respawn_retry:-9} procd_close_instance } 修改权限,并使之生效 chmod 755 /etc/init.d/nft service nft enable 启动nft service nft start 5. 配置Dnsmasq, 将dns指向Clash的5353端口 uci add_list dhcp.@dnsmasq[0].server=\u0026#39;127.0.0.1#5353\u0026#39; uci commit dhcp service dnsmasq restart 全文完\n","permalink":"https://qing.shuncs.com/post/tech/nft4clash/","summary":"配置nftable","title":"在openWrt上安装并配置Clash (Nftable篇)"},{"content":"安装环境 软路由机器架构: x86_64\nOpenWrt版本: 22.03\nClash版本: Premium\nOpenWrt的IP: 192.168.88.3 (如果不同,后面涉及此地址全部需要修改)\n目标 安装及配置完Clash后，在浏览器的设置-\u0026gt;系统-\u0026gt;打开您计算机的代理设置-\u0026gt;手动设置代理 按上图输入主路由器地址和端口，并保存退出就可以访问Google\n0. 下载 以下软件需要预先下载，然后再通过Winscp工具上传到openWrt里面。\nClash Country.mmdb yacd (UI界面，可选) 也可以在openWrt命令行执行以下脚本自动安装及配置后续全部内容（但代理配置文件仍需自定义）\nwget https://www.shuncs.com/download/instclash.sh \u0026amp;\u0026amp; chmod +x instclash.sh \u0026amp;\u0026amp; ./instclash.sh 1. 安装Clash 打开Winscp客户端，点击新建会话(快捷键ctrl+n)，文件协议选择SCP，主机名里面输入主路由器地址192.168.88.3，用户名输入root，如下图 然后点击保存和确定，然后点击登录，将下载好的软件上传到openWrt中(如果有密钥提示，点击添加)\n使用putty登录openWrt，然后按顺序执行以下命令（大小写勿输错）\ncd /root gunzip clash-linux-amd64-latest.gz mv clash-linux-amd64-latest /usr/bin/clash chmod +x /usr/bin/clash mkdir -p /root/.config/clash mv Country.mmdb .config/clash/ 2. 配置 新增Clash配置文件 vi /root/.config/clash/router.yaml 将如下内容复制到文件中(以下部分内容自定义)，然后输入:wq保存退出\nmixed-port: 7890 redir-port: 7892 tproxy-port: 7893 allow-lan: true log-level: info ipv6: false #下面三行内容可以在web页面查看流量规则等,如果未安装请在前面加# secret: \u0026#39;\u0026#39; external-controller: \u0026#39;192.168.88.3:9090\u0026#39; external-ui: ui profile: store-fake-ip: true #如果未安装tun，请在前面加#注释掉 tun: enable: true stack: system dns-hijack: - tcp://8.8.8.8:53 - udp://8.8.8.8:53 auto-route: true auto-detect-interface: true dns: enable: true ipv6: false listen: 0.0.0.0:5353 enhanced-mode: fake-ip fake-ip-range: 198.18.0.1/16 nameserver: - 114.114.114.114 - 223.5.5.5 fallback: - tls://dns.google:853 - tls://1.1.1.1:853 fallback-filter: geoip: true ipcidr: - 240.0.0.0/4 proxy-providers: proxyA: #根据实际情况自定义 type: file path: ./proxies/proxyA.yaml #根据实际情况自定义 health-check: enable: true interval: 36000 url: http://www.gstatic.com/generate_204 proxyB: #根据实际情况自定义 type: file path: ./proxies/proxyB.yaml #根据实际情况自定义 health-check: enable: true interval: 36000 url: http://www.gstatic.com/generate_204 proxyURL: #如果是订阅链接在此处配置即可 type: http url: \u0026#34;https://raw.githubusercontent.com/learnhard-cn/free_proxy_ss/main/clash/clash.provider.yaml\u0026#34; #根据实际情况自定义 interval: 3600 path: ./proxies/proxyURL.yaml #根据实际情况自定义 health-check: enable: true interval: 600 url: http://www.gstatic.com/generate_204 proxy-groups: - name: \u0026#34;auto\u0026#34; type: url-test use: - proxyA #需要和上面名称对应 - proxyB #需要和上面名称对应 url: \u0026#39;http://www.gstatic.com/generate_204\u0026#39; interval: 300 - name: Proxy type: select use: - proxyB #需要和上面名称对应 # fallback 自动选择服务器 - name: \u0026#34;fallback-auto\u0026#34; type: fallback use: - proxyA #需要和上面名称对应 - proxyB #需要和上面名称对应 url: \u0026#39;http://www.gstatic.com/generate_204\u0026#39; interval: 300 - name: \u0026#34;load-balance\u0026#34; type: load-balance use: - proxyA #需要和上面名称对应 - proxyB #需要和上面名称对应 url: \u0026#39;http://www.gstatic.com/generate_204\u0026#39; interval: 300 rule-providers: reject: type: file behavior: classical path: ./rules/reject.yaml proxy: type: file behavior: classical path: ./rules/proxy.yaml rules: # 拒绝-\u0026gt;代理-\u0026gt;其余直连 - RULE-SET,reject,REJECT - RULE-SET,proxy,fallback-auto - MATCH,DIRECT 以上内容也可在以下地址下载\nhttps://www.shuncs.com/download/route_sample.yaml\n新增规则文件 输入以下命令\nvi /root/.config/clash/rules/proxy.yaml 将如下内容复制到文件中，然后输入:wq保存退出\npayload: - DOMAIN-KEYWORD,google - DOMAIN-KEYWORD,gmail - DOMAIN-KEYWORD,youtube 以上内容仅是示例, 具体可在以下地址下载\nhttps://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt\n新增黑名单文件 输入以下命令\nvi /root/.config/clash/rules/reject.yaml 将如下内容复制到文件中，然后输入:wq保存退出\npayload: - DOMAIN-KEYWORD,admarvel - DOMAIN-KEYWORD,admaster 以上内容仅是示例, 详细可在以下地址下载\nhttps://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt\n测试Clash配置文件的格式是否正确 clash -d /root/.config/clash/ -t -f router.yaml 设置openWrt中每次开机自动启动Clash vi /etc/init.d/clash 将此内容复制到文件中,并输入:wq保存退出。\n#!/bin/sh /etc/rc.common START=90 STOP=15 USE_PROCD=1 #PROCD_DEBUG=1 CONF=/root/.config/clash/ CONFFILE=router.yaml PROG=/usr/bin/clash start_service() { procd_open_instance procd_set_param command $PROG -f $CONF$CONFFILE -d $CONF procd_set_param stdout 1 procd_set_param stderr 1 procd_set_param respawn ${respawn_threshold:-3600} ${respawn_timeout:-5} ${respawn_retry:-9} procd_close_instance } 设置权限，并使之生效 chmod 755 /etc/init.d/clash service clash enable 启动Clash service clash start 配置Clash UI (可选)\n使用Winscp工具，将yacd.tar内的文件夹上传到openWrt机器，然后执行以下命令 mv /root/public /root/.config/clash/ui /etc/init.d/clash restart 在浏览器地址栏中输入: http://192.168.88.3:9090/ui 显示以下内容，在Host一栏输入192.168.88.3，点击确定即可显示Clash详细页面 3. 软件下载 名称 版本号 说明 下载地址 Clash Premium 透明代理 https://release.dreamacro.workers.dev/latest/clash-linux-amd64-latest.gz Clash-dashboard clash Web界面 https://github.com/Dreamacro/clash-dashboard/archive/refs/heads/gh-pages.zip Winscp 5.21 SCP客户端 https://winscp.net/download/WinSCP-5.21.5-Portable.zip Putty 0.78 虚拟终端 https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe Country.mmdb IP地址库 https://github.com/Dreamacro/maxmind-geoip/releases/latest/download/Country.mmdb 4. 说明 Clash版本区别 Premium 版本支持TUN和配置文件中RULE-SET\n如果有电视机顶盒,只能使用Premium版本\nClash规则配置文件格式(Premium有效) payload: - DOMAIN-SUFFIX,yinxiang.com - DOMAIN-SUFFIX,fb.me - DOMAIN-KEYWORD,linkedin - DOMAIN,local.adguard.org - IP-CIDR,192.168.0.0/16 - PROCESS-NAME,wechat Clash配置说明 规则 说明 范例 说明 PROCESS-NAME 匹配进程 wechat.exe 进程名包含该关键字,在透明代理上不生效 PROCESS-SUFFIX 域名后缀 yinxiang.com PROCESS-KEYWORD 域名关键字 linkedin DOMAIN 域名匹配 local.adguard.org IP-CIDR IP段匹配 192.168.0.0/16 SRC-IP-CIDR 源IP段匹配 192.168.0.0/16 GEOIP GEOIP数据库匹配 CN 国家代码 DST-PORT 目标端口匹配 SRC-PORT 源端口匹配 MATCH 全匹配 一般放在最后 5. Q\u0026amp;A 问： 执行脚本返回 答： 脚本默认openWrt已安装tun，如果之前未安装，请执行 opkg update opkg install kmod-tun 全文完\n","permalink":"https://qing.shuncs.com/post/tech/clashinst/","summary":"安装并配置Clash","title":"在openWrt上安装并配置Clash (Clash篇)"},{"content":"安装环境 软路由机器架构: x86_64\nOpenWrt版本: 22.03\nOpenWrt的IP: 192.168.88.3 (如果不同,后面涉及此地址全部需要修改)\n主路由器的地址: 192.168.88.1(如果不同,后面涉及此地址全部需要修改)\n目标 按下文安装配置完openWrt之后，在浏览器上输入192.168.88.3就可以打开openWrt的主界面\n0. 安装PE 如果已经有U盘启动的可以跳过此步骤\n插入U盘，启动微PE软件，选择安装进U盘。点击立即安装进U盘，U盘启动盘已制作完毕。 1. 在软路由上安装openWrt 将下载好的openwrt-22.03.2-x86-64-generic-ext4-combined.img.gz用7zip（或其他工具）解压到U盘上，并且与physdiskwrite.exe文件放在一个目录。\n使用U盘重启系统，输入以下命令\nphysdiskwrite.exe -u openWrt-22.03.2-x86-64-generic-ext4-combined.img 此时会提示选择硬盘(千万不能选错硬盘分区) 输入硬盘之前的序号就开始安装，安装完毕之后重启电脑后拔下U盘。\n2. 配置openWrt 以下步骤中，文件中的配置内容若存在则修改，没有就新增\n修改IP，DNS和网关(必做) uci set network.lan.ipaddr=\u0026#39;192.168.88.3\u0026#39; uci set network.lan.gateway=\u0026#39;192.168.88.1\u0026#39; uci add_list network.lan.dns=\u0026#39;192.168.88.1\u0026#39; uci commit network 生效网络配置 service network restart 此步骤执行完毕后，可以使用Putty（或XShell等远程工具）。\n更新openWrt包(可选,需联网) opkg update 安装中文包及主题(可选) opkg install luci-i18n-base-zh-cn opkg install luci-i18n-firewall-zh-cn opkg install luci-theme-material 更新openWrt时区(可选) uci set system.@system[0].zonename=\u0026#39;Asia/Shanghai\u0026#39; uci set system.@system[0].timezone=\u0026#39;CST-8\u0026#39; uci commit system 生效系统配置 service system restart 安装tun(使用Clash Premiumn必装) opkg install kmod-tun 安装tproxy(可选) opkg install kmod-nft-tproxy 在浏览器上输入192.168.88.3即可打开openWrt的主页面。\n点击登录就可以进入openWrt详情界面。 3. 软件下载 名称 版本号 说明 下载地址 微PE工具箱 2.2 U盘启动 https://mirrors.sdu.edu.cn/software/Windows/WePE/WePE64_V2.2.exe openWrt 22.03 路由器操作系统 https://downloads.openWrt.org/releases/22.03.2/targets/x86/64/openWrt-22.03.2-x86-64-generic-ext4-combined.img.gz Putty 0.78 虚拟终端 https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe 4. 说明 openWrt各版本区别\ncombined-ext4.img.gz：包含引导信息、rootfs(ext4 格式)、内核以及相关分区信息的硬盘镜像，可以 dd 写入某个磁盘。\ncombined-squashfs.img.gz：包含引导信息、rootfs(squashfs 格式)、内核以及相关分区信息的硬盘镜像。\ngeneric-rootfs.tar.gz：rootfs 包含的所有文件。\nrootfs-ext4.img.gz：rootfs(ext4 格式) 分区镜像，可以 dd 到某个分区或者 mount -o 到某个目录。\nrootfs-squashfs.img.gz：rootfs(squashfs 格式) 分区镜像，可以 dd 写入某个分区或者 mount -o 挂载到目录。\nvmlinuz：内核\next4 与 squashfs 格式的区别\next4 格式的 rootfs 可以扩展磁盘空间大小，而 squashfs 不能。\nsquashfs 格式的 rootfs 可以使用重置功能（恢复出厂设置），而 ext4 不能。\nUEFI\n当您的机器支持 UEFI 的话（新机器一般同时支持 Legacy 和 UEFI ），在这个启动项中一般会出现两个 U 盘的选项，一个是 UEFI 开头的，另一个是不带 UEFI 开头的或叫 Legacy 的\n当您的机器（老机器）只支持 Legacy 时，在这个主板的启动项中就只会出现一个 U 盘的选项\n全文完\n","permalink":"https://qing.shuncs.com/post/tech/openwrt_inst/","summary":"安装并配置openWrt","title":"在openWrt上安装并配置Clash (openWrt篇)"},{"content":"使用环境 开发环境: Windows 11\nHugo版本: 0.108\nGit版本: 2.38.1\nTheme: PaperMod\n前要 上个月底想把荒废已久的blog重新拾起来，当初创建这个blog就是相当简单，使用Hugo+主题+Github。 可以说是完全按照网上的教程的发布到Github上，发布上去之后就基本不看也不用了。\n最近有点想法，想自己的一些日常笔记发布上去，可是我找不到以前的配置了，实在没办法，只能新建一个，按照网上教程，沿用原来的主题。\n发现问题 配置完 config.yml 之后发布到github上，发现css文件无法加载。可是在本地试了没问题，而且印象之前貌似没有这种情况呀。\n打开F12跟踪了一下，发布在css上有个错误 \u0026ldquo;Failed to find a valid digest in the \u0026lsquo;integrity\u0026rsquo; attribute for resource - The resource has been blocked\u0026rdquo;\n于是搜索一下这个错误，原来是index.html文件里面的有一个属性的SHA256不匹配，在Stackoverflow上面有个解决办法，就是在 config.yml 中加上下面这个配置就能解决了，我试了一下，的确是没问题。\nparams: assets: disableFingerprinting: true config.toml 文件配置\nparams.assets.disableFingerprinting = true 问题到此似乎解决了，不过我好奇这个问题这个问题以前没出现过，是不是升级hugo或者主题的新版本之后才有?\n而且我后来测试的时候，config.yml 使用最简的配置，问题依然还有。为什么我在hugo和PaperMod的issue上没找到此类问题描述？\n查了一下hugo的文档，integrity这个属性是为了文件的完整性，防止被篡改，可问题是我在本地发布，同时使用git提交，这个过程中怎么可能被改？\n解决 这个时候我突然想起来了，在我做git add的时候曾经有个warning，当时因为能提交成功所以就忽略这个warning。 因为Windows和Linux对于回车符有些不太一样，于是我又在Linux机器上使用相同的命令和配置重新做了一下，并发布到Github上，结果在Linux机器上发布的就没问题，问题确定就是回车引起的，在网上查了一下，应该是安装Git的时候，未勾选下面的配置。 不过如果Git安装好了，使用下面的命令也可以实现。\ngit config --global core.autocrlf false 这样重新使用git add并提交，然后push到Github上，css样式就可以顺利加载了。\n参考文章 https://stackoverflow.com/questions/65040931/hugo-failed-to-find-a-valid-digest-in-the-integrity-attribute-for-resource 全文完\n","permalink":"https://qing.shuncs.com/post/hugo/hugo/","summary":"Hugo中无法加载CSS文件","title":"解决Hugo无法加载css文件"}]